# Non-Functional Requirements

> 버전: 1.0.0
> 최종 수정: 2026-01-28

---

## 1. 성능 (Performance)

### 1.1 응답 시간

| 작업 | 목표 응답 시간 (p95) | 측정 조건 |
|------|---------------------|----------|
| 레시피 목록 조회 | < 200ms | 1000개 레시피, 20개 페이지 |
| 레시피 상세 조회 | < 100ms | 단일 레시피 |
| 레시피 생성 | < 300ms | 표준 레시피 (20개 재료) |
| 레시피 검색 | < 300ms | 5000개 레시피 검색 |
| 레시피 URL 추출 | < 5s | 일반 레시피 웹사이트 |
| 식사 계획 조회 | < 150ms | 주간 계획 (21개 식사) |
| 장보기 목록 생성 | < 500ms | 21개 식사, 200개 재료 |
| AI 레시피 추천 | < 10s | Growth Phase |

### 1.2 처리량 (Throughput)

| 단계 | 동시 사용자 | 초당 요청 (RPS) |
|------|------------|----------------|
| MVP | 100 | 50 |
| Growth | 1,000 | 500 |
| Scale | 10,000 | 5,000 |

### 1.3 가용성 (Availability)

| 지표 | 목표 |
|------|------|
| 업타임 | 99.5% (MVP), 99.9% (Scale) |
| 계획된 다운타임 | 월 4시간 이하 (유지보수) |
| 장애 복구 시간 (RTO) | 1시간 이내 |
| 데이터 손실 허용 (RPO) | 1시간 이내 |

---

## 2. 보안 (Security)

### 2.1 인증 (Authentication)

| 항목 | 요구사항 |
|------|----------|
| 인증 방식 | JWT (Access Token + Refresh Token) |
| OAuth 2.0 | Google, Apple 지원 |
| Access Token 만료 | 15분 |
| Refresh Token 만료 | 7일 (활동 시 자동 갱신) |
| 비밀번호 정책 | 최소 8자, 대/소문자, 숫자, 특수문자 1개 이상 |
| 로그인 실패 제한 | 5회 실패 시 15분 잠금 |

### 2.2 인가 (Authorization)

| 리소스 | 접근 규칙 |
|--------|----------|
| 레시피 (본인) | CRUD 모두 가능 |
| 레시피 (타인 - 공개) | 읽기만 가능 |
| 레시피 (타인 - 비공개) | 접근 불가 |
| 식사 계획 | 본인 및 가족 공유 대상만 |
| 장보기 목록 | 본인 및 가족 공유 대상만 |
| 사용자 프로필 | 본인만 |

### 2.3 데이터 보안

| 항목 | 요구사항 |
|------|----------|
| 전송 암호화 | TLS 1.3 필수 |
| 저장 암호화 | AES-256 (민감 데이터) |
| 비밀번호 해싱 | bcrypt (cost factor: 12) |
| API 키 저장 | 환경 변수, Vault 사용 |

### 2.4 개인정보 보호

| 항목 | 요구사항 |
|------|----------|
| 데이터 수집 동의 | 명시적 동의 필수 |
| 데이터 삭제 요청 | 30일 이내 완전 삭제 |
| 데이터 내보내기 | JSON 형식 제공 |
| 로그 개인정보 | 마스킹 처리 (이메일, IP) |

---

## 3. 확장성 (Scalability)

### 3.1 수평 확장

| 컴포넌트 | 확장 전략 |
|----------|----------|
| API 서버 | 로드 밸런서 + 인스턴스 추가 |
| 데이터베이스 | Read Replica 추가 |
| 캐시 | Redis Cluster |
| 파일 스토리지 | CDN + Object Storage |

### 3.2 데이터 용량

| 항목 | MVP 목표 | Scale 목표 |
|------|----------|-----------|
| 사용자 수 | 10,000 | 500,000 |
| 레시피 수 (전체) | 100,000 | 5,000,000 |
| 사용자당 레시피 | 200 | 500 |
| 사용자당 식사 계획 | 52주 (1년) | 260주 (5년) |

### 3.3 성장 대응

| 지표 | 임계값 | 대응 |
|------|--------|------|
| CPU 사용률 | > 70% | 인스턴스 추가 |
| 메모리 사용률 | > 80% | 인스턴스 추가 |
| DB 연결 수 | > 80% max | Read Replica 추가 |
| 응답 시간 증가 | > 50% 기준치 | 캐시 최적화 |

---

## 4. 신뢰성 (Reliability)

### 4.1 외부 의존성 실패 전략

| 의존성 | 타임아웃 | 재시도 | Circuit Breaker | 폴백 |
|--------|----------|--------|-----------------|------|
| URL 추출 API | 10s | 2회 (1s, 2s 간격) | 5회 연속 실패 시 열림 | 수동 입력 안내 |
| AI 추천 API | 30s | 1회 (5s 간격) | 3회 연속 실패 시 열림 | 캐시된 추천 반환 |
| 배달 연동 API | 5s | 3회 (500ms 간격) | 5회 연속 실패 시 열림 | 수동 목록 복사 안내 |
| 영양 정보 API | 5s | 2회 (1s 간격) | 5회 연속 실패 시 열림 | "정보 없음" 표시 |

### 4.2 Circuit Breaker 정책

| 상태 | 조건 | 동작 |
|------|------|------|
| Closed | 정상 | 요청 통과 |
| Open | 임계값 초과 | 즉시 폴백 반환, 60초 대기 |
| Half-Open | 60초 경과 | 1회 시도, 성공 시 Closed |

### 4.3 데이터 충돌 전략

| 상황 | 동작 |
|------|------|
| 동시 편집 | Last-Write-Wins + 충돌 알림 |
| 오프라인 동기화 | 로컬 우선 저장 + 서버 병합 |
| 네트워크 실패 | 로컬 저장 + 연결 복구 시 자동 재시도 |

### 4.4 데이터 일관성

| 작업 | 일관성 수준 |
|------|------------|
| 레시피 생성/수정 | Strong Consistency |
| 레시피 조회 | Eventual Consistency (캐시 5분) |
| 장보기 목록 체크 | Strong Consistency |
| 검색 결과 | Eventual Consistency (인덱스 갱신 30초) |

---

## 5. 운영 (Operations)

### 5.1 모니터링

| 항목 | 도구 | 알림 조건 |
|------|------|----------|
| 애플리케이션 메트릭 | Prometheus + Grafana | - |
| 에러 추적 | Sentry | 에러율 > 1% |
| 응답 시간 | Prometheus | p95 > 기준치 200% |
| 가용성 | Uptime Robot | 다운타임 감지 |

### 5.2 로깅

| 로그 레벨 | 보관 기간 | 포함 정보 |
|----------|----------|----------|
| ERROR | 90일 | 스택 트레이스, 요청 컨텍스트 |
| WARN | 30일 | 경고 메시지, 요청 ID |
| INFO | 7일 | 요청/응답 요약, 타이밍 |
| DEBUG | 1일 (개발 환경만) | 상세 디버그 정보 |

### 5.3 백업

| 유형 | 주기 | 보관 기간 |
|------|------|----------|
| 전체 백업 | 일간 (02:00 UTC) | 30일 |
| 증분 백업 | 시간별 | 7일 |
| 트랜잭션 로그 | 실시간 | 24시간 |

### 5.4 배포

| 항목 | 요구사항 |
|------|----------|
| 배포 방식 | Blue-Green Deployment |
| 롤백 시간 | 5분 이내 |
| 다운타임 | Zero-Downtime 배포 |
| 배포 승인 | 스테이징 테스트 통과 필수 |

---

## 6. 국제화 (Internationalization)

### 6.1 지원 언어

| 단계 | 지원 언어 |
|------|----------|
| MVP | 한국어 (ko), 영어 (en) |
| Growth | + 일본어 (ja) |
| Scale | + 중국어 (zh), 스페인어 (es) |

### 6.2 지역화 요구사항

| 항목 | 요구사항 |
|------|----------|
| 날짜 형식 | 로케일별 (YYYY-MM-DD, MM/DD/YYYY) |
| 숫자 형식 | 로케일별 (1,000.5 vs 1.000,5) |
| 단위 시스템 | 미터법 / 야드파운드법 선택 |
| 타임존 | 사용자 설정 타임존 지원 |

---

## 7. 접근성 (Accessibility)

### 7.1 웹 접근성

| 항목 | 요구사항 |
|------|----------|
| 표준 준수 | WCAG 2.1 Level AA |
| 스크린 리더 | 주요 기능 지원 |
| 키보드 내비게이션 | 모든 기능 접근 가능 |
| 색상 대비 | 최소 4.5:1 |

### 7.2 모바일 접근성

| 항목 | 요구사항 |
|------|----------|
| 터치 타겟 | 최소 44x44 px |
| 텍스트 크기 | 시스템 설정 존중 |
| 화면 회전 | 가로/세로 모두 지원 |

---

## 8. 호환성 (Compatibility)

### 8.1 브라우저

| 브라우저 | 최소 버전 |
|----------|----------|
| Chrome | 최근 2개 버전 |
| Safari | 최근 2개 버전 |
| Firefox | 최근 2개 버전 |
| Edge | 최근 2개 버전 |
| Mobile Safari | iOS 15+ |
| Chrome Android | 최근 2개 버전 |

### 8.2 모바일 OS

| OS | 최소 버전 | 비고 |
|----|----------|------|
| iOS | 15.0 | iPhone 6s 이상 |
| Android | 10.0 (API 29) | - |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0.0 | 2026-01-28 | 초기 문서 작성 |
